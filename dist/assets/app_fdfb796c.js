webpackJsonp([0],{12:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments[1],n=t.type,i=t.curtPhotoID,u=t.curtTagID,l=t.pointX,D=t.pointY,x=(t.calcParm,t.flag),I=t.pointIndx,j=t.isFill,E=t.selectedTagID,k=t.layerID,L=t.tagName,C=t.holdingLayerID,A=t.attrs,M=t.shapeType,N=t.evoScale,H=t.pointPos,F=t.offsetDistenceArr,B=t.specTag,R=e[i];R||(R={});var W=R,$=W.layers;switch($||($=[]),n){case s:var U=c.default.Util.getRandomColor(),G=Math.random();return a({},e,r({},i,{layers:[].concat(o($),[{id:G,tagName:"",points:[],actualPoints:[],fill:null,closed:!1,firstSpotHit:!1,lineColor:U,overPointIndex:null,shape:0,firstTimeNewPoint:!0,attrs:"",shapeType:null,everDone:!1}]),curtTag:G,selectedTag:null,holdingLayerID:null}));case d:return $=$.map(function(e){return e.id===u&&(e.points=[].concat(o(e.points),[{x:l,y:D}])),e}),a({},e,r({},i,a({},R,{layers:$})));case p:return $=$.map(function(e){return e.id===u&&(e.closed=!0),e}),a({},e,r({},i,a({},R,{layers:$})));case h:return $=$.map(function(e){return e.id===u&&(e.firstSpotHit=x,e.overPointIndex=I),e}),a({},e,r({},i,a({},R,{layers:$})));case m:return $=$.map(function(e){return e.id===u&&(e.fill=j?"rgba(255, 0, 0, 0.3)":null),e}),a({},e,r({},i,a({},R,{layers:$})));case b:return a({},e,r({},i,a({},R,{selectedTag:E})));case y:return $=$.map(function(e){if(e.id===u){var t=e.points[I];null!==l&&(t.x=l),null!==D&&(t.y=D)}return e}),a({},e,r({},i,a({},R,{layers:$})));case O:return $=$.map(function(e){var t=e.points.map(function(e){var t=e.x,n=e.y;return{x:t*N,y:n*N}});return a({},e,{points:t})}),a({},e,r({},i,a({},R,{layers:$})));case f:return $=$.map(function(e){return e.id===u&&(e.closed?(e.closed=!1,e.everDone=!1):(e.points.pop(),e.actualPoints.pop())),e}),a({},e,r({},i,a({},R,{layers:$})));case S:$=$.map(function(e){return e.id===C&&(e.closed=!1,e.everDone=!1),e});var V=null;return $.forEach(function(e,t){e.id===u&&(V=t)}),$.splice(V,1),a({},e,r({},i,a({},R,{layers:$,curtTag:C,holdingLayerID:null})));case v:return $=$.map(function(e){return e.id===u&&(e.firstTimeNewPoint=!1),e}),a({},e,r({},i,a({},R,{layers:$})));case w:var Y=null;return $.forEach(function(e,t){e.id===k&&(Y=t)}),$.splice(Y,1),a({},e,r({},i,a({},R,{layers:$,holdingLayerID:null,selectedTag:null})));case P:return $=$.map(function(e,t){return e.id===k&&(e.tagName=L,e.attrs=A,e.shapeType=M,e.everDone=!0),e}),a({},e,r({},i,a({},R,{layers:$,holdingLayerID:null})));case _:return a({},e,r({},i,a({},R,{holdingLayerID:C})));case g:return $=$.map(function(e){return e.id===B&&(e.points=e.points.map(function(e,t){return{x:H.x-F[t].x,y:H.y-F[t].y}})),e}),a({},e,r({},i,a({},R,{layers:$})));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fixLayerHold=t.alterShapeState=t.alterShape=t.deleteShape=t.moveShape=t.selectShape=t.fixShapeFill=t.outFirstTime=t.fistTimeUnclose=t.redoAPoint=t.fixPointPosition=t.pointMove=t.fixFirstSpotHit=t.closeLine=t.addSpot=t.addTempLayer=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var u=n(80),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=(n(7),n(68),n(66),n(16)),s="ADD_LAYER",f="CANCLE_A_POINT",d="ADD_SPOT",p="CLOSE_LINE",h="FIX_POINT_STATE",y="POINT_MOVE",v="OUT_FIRST_TIME",g="MOVE_A_SHAPE",m="FIX_SHAPE_FILL",b="SELECT_A_SHAPE",P="ALTER_SHAPE",w="DELETE_SHAPE",_="FIX_LAYER_HOLD",O="FIX_POINT_POSITION",S="FIRST_TIME_UNCLOSE",T={},D=(t.addTempLayer=function(e){return function(e,t){var n=t().curtPhoto.id;e({type:s,curtPhotoID:n})}},t.addSpot=function(e,t,n){return function(r,o){var i=o().curtPhoto.id,a=o().paintingBoard[i],u=a.curtTag;if(a.holdingLayerID)return void(0,l.hintFinish)();r({type:d,pointX:e,pointY:t,calcParm:n,curtTagID:u,curtPhotoID:i})}},t.closeLine=function(){return function(e,t){var n=t().curtPhoto.id,r=t().paintingBoard[n],o=r.curtTag,i=r.selectedTag;e({type:p,curtTagID:i||o,curtPhotoID:n})}},t.fixFirstSpotHit=function(e,t){return function(n,r){var o=r().curtPhoto.id,i=r().paintingBoard[o],a=i.curtTag,u=i.selectedTag;n({type:h,flag:e,curtTagID:u||a,curtPhotoID:o,pointIndx:t})}},t.pointMove=function(e,t,n,r){return function(o,i){var a=i().curtPhoto.id,u=i().paintingBoard[a],c=u.curtTag,s=u.selectedTag,f=u.holdingLayerID,d=s||c;if(f)return void(0,l.hintFinish)();o({type:y,curtPhotoID:a,curtTagID:d,pointIndx:e,pointX:t,pointY:n,calcParm:r})}},t.fixPointPosition=function(){return function(e,t){var n=t().curtPhoto.id,r=t().stage,o=r.width,i=(r.height,r.preWidth);r.preHeight;e({type:O,curtPhotoID:n,evoScale:o/i})}},t.redoAPoint=function(e){return function(t,n){var r=n().curtPhoto.id,o=n().paintingBoard[r],i=o.curtTag,a=o.selectedTag;if(o.holdingLayerID)return void(0,l.hintFinish)();if(!a){t({type:f,curtTagID:e||i,curtPhotoID:r})}}},t.fistTimeUnclose=function(e){return function(t,n){var r=n().curtPhoto.id,o=n().paintingBoard[r],i=o.curtTag,a=(o.selectedTag,o.holdingLayerID);t({type:S,curtTagID:e||i,curtPhotoID:r,holdingLayerID:a})}},t.outFirstTime=function(){return function(e,t){var n=t().curtPhoto.id,r=t().paintingBoard[n],o=r.curtTag;r.selectedTag;e({type:v,curtTagID:o,curtPhotoID:n})}},t.fixShapeFill=function(e,t){return function(n,r){var o=r().curtPhoto.id;r().paintingBoard[o].holdingLayerID;n({type:m,curtTagID:t,curtPhotoID:o,isFill:e})}},t.selectShape=function(e,t){return function(n,r){var o=r().curtPhoto.id;if(void 0!==o&&!t){var i=r().paintingBoard[o];if(i.holdingLayerID||(0,l.finishFirst)(i.layers,i.curtTag))return void(0,l.hintFinish)()}n({type:b,selectedTagID:e,curtPhotoID:o})}},t.moveShape=function(e,t,n,r){return function(o,i){var a=i().curtPhoto.id;o({type:g,specTag:n,curtPhotoID:a,offsetDistenceArr:e,pointPos:t,calcParm:r})}},t.deleteShape=function(e){return function(t,n){var r=n().curtPhoto.id;t({type:w,curtPhotoID:r,layerID:e})}}),x=t.alterShape=function(e,t,n){return function(r,o){var i=o().curtPhoto.id,a=o().shape;r({type:P,curtPhotoID:i,layerID:n,tagName:e,attrs:t,shapeType:a})}};t.alterShapeState=function(e){var t=e.tagName,n=void 0===t?"":t,r=e.layerID,o=void 0===r?null:r,i=e.attrs,a=void 0===i?"":i,u=e.isDelete,c=void 0!==u&&u,l=e.isDone,s=void 0!==l&&l;return function(e,t){t().curtPhoto.id;s&&e(x(n,a,o)),c&&e(D(o))}},t.fixLayerHold=function(e){return function(t,n){var r=n().curtPhoto.id;t({type:_,curtPhotoID:r,holdingLayerID:e})}}},122:function(e,t,n){"use strict";(function(e,r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(15),d=n(7),p=n(133),h=i(p),y=n(67),v=(i(y),n(12)),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),m=e,b=(m.Stage,m.Layer,m.Circle,m.Line,m.Image,function(e){function t(e){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={image:null},n}return c(t,e),s(t,[{key:"loadImage",value:function(e){var t=this,n=new window.Image;n.onload=function(){t.setState({image:n})},n.src=e}},{key:"componentWillReceiveProps",value:function(e){this.loadImage(e.curtPhoto.url)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.paintingBoard,n=e.curtPhoto,r=e.actions,i=e.shape,a=e.stage,u=n.id,c=t[u];if(!c)return null;var s=this.state.image;return o.createElement("div",{className:"thumbnail img",ref:"container"},o.createElement(h.default,l({layersGroup:c,image:s,shape:i,stage:a},r)))}}]),t}(r));t.default=(0,f.connect)(function(e){return{curtPhoto:e.curtPhoto,paintingBoard:e.paintingBoard,photosData:e.photosData,shape:e.shape,stage:e.stage}},function(e){return{actions:(0,d.bindActionCreators)(l({},g),e)}})(b)}).call(t,n(31),n(1).Component,n(1))},123:function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(15),l=n(134),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){this.props.redoAPoint;return a("div",{className:"btn-group"},void 0)}}]),t}(e);t.default=(0,c.connect)(function(e){return e},s)(f)}).call(t,n(1).Component)},124:function(e,t,n){"use strict";(function(e,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(135),f=function(e){return e&&e.__esModule?e:{default:e}}(s),d=n(15),p=n(7),h=n(41),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),v=n(12),g=(n(16),function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.photosData,n=e.switchPhoto,o=(e.paintingBoard,e.curtPhoto),i=e.selectShape;return c("nav",{className:"navbar navbar-inverse navbar-static-top"},void 0,c("div",{className:"container imglist"},void 0,c("div",{className:"btn btn-danger listBtnLeft",onClick:function(e){t.forEach(function(e,t,r){o.id===e.id&&t>0&&n(r[t-1])})}},void 0,"<"),c("div",{className:"row"},void 0,t.map(function(e,t){return r.createElement(f.default,{key:e.id,photo:e,active:o.id===e.id,switchPhoto:n,selectShape:i})})),c("div",{className:"btn btn-danger listBtnRight",onClick:function(e){t.forEach(function(e,t,r){o.id===e.id&&t<r.length-1&&n(r[t+1])})}},void 0,">")))}}]),t}(e));t.default=(0,d.connect)(function(e){return{photosData:e.photosData,curtPhoto:e.curtPhoto,paintingBoard:e.paintingBoard}},function(e){return(0,p.bindActionCreators)(u({},y,{selectShape:v.selectShape}),e)})(g)}).call(t,n(1).Component,n(1))},125:function(e,t,n){"use strict";(function(e,r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(73),f=o(s),d=n(15),p=n(7),h=(n(16),n(12)),y=n(136),v=o(y),g=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.paintingBoard,n=e.curtPhotoID,o=e.selectShape,i=e.fixLayerHold,a=e.fixShapeFill,u=null;if(t&&t[n]){var l=(t[n],t[n]),s=l.curtTag,d=l.selectedTag;u=t[n].layers.map(function(e){if(!e||s!==e.id)return r.createElement(v.default,{key:e.id,id:e.id,tagName:e.tagName,active:d===e.id,selectShape:o,fixLayerHold:i,fixShapeFill:a})})}return c("div",{className:f.default.showData},void 0,u)}}]),t}(e);t.default=(0,d.connect)(function(e){return{paintingBoard:e.paintingBoard,curtPhotoID:e.curtPhoto.id}},function(e){return(0,p.bindActionCreators)({selectShape:h.selectShape,fixLayerHold:h.fixLayerHold,fixShapeFill:h.fixShapeFill},e)})(g)}).call(t,n(1).Component,n(1))},126:function(e,t,n){"use strict";(function(e){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(15),f=n(7),d=n(12),p=n(69),h=r(p),y=n(70),v=r(y),g=c("span",{className:"fa fa-pencil"}),m=c("span",{className:"hidden-sm hidden-xs"},void 0,"放大"),b=c("span",{className:"fa fa-pencil"}),P=c("span",{className:"hidden-sm hidden-xs"},void 0,"缩小"),w=c("span",{className:"fa fa-pencil"}),_=c("span",{className:"hidden-sm hidden-xs"},void 0,"适应"),O=c("span",{className:"fa fa-photo"}),S=c("span",{className:"hidden-sm hidden-xs"},void 0,"点描"),T=c("span",{className:"fa fa-reorder"}),D=c("span",{className:"hidden-sm hidden-xs"},void 0,"框选"),x=c("span",{className:"fa fa-circle-o-notch"},void 0," "),I=c("span",{className:"hidden-sm hidden-xs"},void 0,"上一步"),j=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.redoAPoint,n=e.changeShape,r=e.layersGroup,o=e.shape,i=(e.curtPhotoID,e.adaptStage),a=e.incrementStage,u=e.decrementStage;return c("div",{className:"col-lg-1 col-md-1 col-sm-1 col-xs-1 tool"},void 0,c("div",{className:"list-group"},void 0,c("button",{type:"button",className:"list-group-item list-group-item-info",onClick:function(e){return a()}},void 0,g,m),c("button",{type:"button",className:"list-group-item list-group-item-info",onClick:function(e){return u()}},void 0,b,P),c("button",{type:"button",className:"list-group-item list-group-item-info",onClick:function(e){return i()}},void 0,w,_),c("button",{type:"button",className:"list-group-item list-group-item-info",onClick:function(e){n(0)}},void 0,O,S),c("button",{type:"button",className:"list-group-item list-group-item-info",onClick:function(e){n(1)}},void 0,T,D),c("button",{type:"button",className:"list-group-item list-group-item-info",onClick:function(e){r&&r.curtTag&&0===o&&t()}},void 0,x,I)))}}]),t}(e);t.default=(0,s.connect)(function(e){var t=e.curtPhoto,n=e.paintingBoard,r=e.shape;return{layersGroup:n[t.id],shape:r,curtPhotoID:t.id}},function(e){return u({},(0,f.bindActionCreators)({redoAPoint:d.redoAPoint},e),(0,f.bindActionCreators)(h,e),(0,f.bindActionCreators)(v,e))})(j)}).call(t,n(1).Component)},127:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(0,a.createStore)(v,(0,a.compose)((0,a.applyMiddleware)(p.default,y)))}Object.defineProperty(t,"__esModule",{value:!0}),t.history=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var a=n(7),u=n(25),c=n(152),l=r(c),s=n(137),f=r(s),d=n(65),p=r(d),h=(0,l.default)(),y=(0,u.routerMiddleware)(h),v=(0,a.combineReducers)(i({},f.default,{router:u.routerReducer}));t.history=h},128:function(e,t){},129:function(e,t){},130:function(e,t){},131:function(e,t,n){"use strict";(function(e,t,r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(15),f=n(7),d=n(32),p=n(25),h=n(127),y=o(h),v=n(123),g=(o(v),n(122)),m=o(g),b=n(124),P=o(b),w=n(126),_=o(w),O=n(125),S=o(O),T=n(64);n(128),n(129),n(130);var D=(0,y.default)(),x=c(P.default,{}),I=c(_.default,{}),j=c(m.default,{}),E=function(e){function n(e){return i(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return u(n,e),l(n,[{key:"componentDidMount",value:function(){(0,this.props.actions.loadImage)()}},{key:"render",value:function(){var e=this.props,n=(e.photosData,e.actions),r=e.curtPhoto;n.loadImage;return c("div",{className:"appRoot"},void 0,x,c("div",{className:"container-fluid height"},void 0,c("div",{className:"row height"},void 0,I,c("div",{className:"col-lg-11 col-md-11 col-sm-11 col-xs-11 height"},void 0,j),t.createElement(S.default,{curtPhotoID:r.id}))))}}]),n}(e);E=(0,s.connect)(function(e){return e},function(e){return{actions:(0,f.bindActionCreators)({loadImage:T.loadImage},e)}})(E),r.render(c(s.Provider,{store:D},void 0,c(p.ConnectedRouter,{history:h.history},void 0,c(d.Route,{path:"/",component:E}))),document.getElementById("root"))}).call(t,n(1).Component,n(1),n(40))},132:function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(72),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tagNameVal:e.holdingLayer.tagName,attrVal:e.holdingLayer.attrs},n.tagNameChange=n.tagNameChange.bind(n),n.done=n.done.bind(n),n.deleted=n.deleted.bind(n),n.redoAPoint=n.redoAPoint.bind(n),n}return i(t,e),u(t,[{key:"tagNameChange",value:function(e){this.setState({tagNameVal:e.target.value})}},{key:"done",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state.tagNameVal,n=this.state.attrVal,r=this.props,o=r.alterShapeState,i=r.holdingLayerID;if(!t||0===Number(t))return void window.alert("请填写有效标签名");o({tagName:t,attrs:n,layerID:i,isDone:!0})}},{key:"deleted",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.props;(0,t.alterShapeState)({layerID:t.holdingLayerID,isDelete:!0})}},{key:"redoAPoint",value:function(){(0,this.props.fistTimeUnclose)()}},{key:"render",value:function(){var e=this,t=this.state,n=t.tagNameVal,r=t.attrVal,o=this.props,i=(o.alterShapeState,o.holdingLayer),u=o.fixLayerHold,c=o.shape,s=this.tagNameChange,f=this.deleted,d=this.done,p=(this.cancel,this.redoAPoint),h=i.points[0],y=h.x,v=h.y;return a("div",{className:l.default.closedPrompt,style:{top:v,left:y}},void 0,a("p",{},void 0,a("input",{type:"text",placeholder:"name",value:n,onChange:s})),a("p",{},void 0,a("textarea",{className:l.default.area,cols:"30",rows:"2",placeholder:"attrs",value:r,onChange:function(t){return e.setState({attrVal:t.target.value})}})),a("button",{onClick:d},void 0,"done"),i.everDone||0!==c?null:a("button",{onClick:p},void 0,"undo"),a("button",{onClick:f},void 0,"delete"),i.everDone?a("button",{onClick:function(e){return u(null)}},void 0,"cancel"):null)}}]),t}(e);t.default=s}).call(t,n(1).Component)},133:function(e,t,n){"use strict";(function(e,r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(72),p=(i(d),n(66)),h=n(132),y=i(h),v=n(67),g=i(v),m=n(12),b=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(m),e),P=b.Stage,w=b.Layer,_=(b.Circle,b.Line,b.Image),O=function(e){function t(e){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={prompt:!1,data:null},n.stageWidth=760,n.stageHeight=500,n.calcParm={},n.getPointerPosition=n.getPointerPosition.bind(n),n.mark=n.mark.bind(n),n.clickTime=0,n}return c(t,e),f(t,[{key:"getPointerPosition",value:function(){return this.refs.stage.getStage().getPointerPosition()}},{key:"mark",value:function(e){var t=this.props,n=t.layersGroup,r=n.layers,o=n.curtTag,i=(n.selectedTag,n.holdingLayerID,t.shape),a=t.addSpot,u=t.closeLine,c=t.addTempLayer,l=t.fixLayerHold,s=(t.selectShape,r.reduce(function(e,t){return e.id===o?e:t},r[0]));if(!s.closed){var f=this.getPointerPosition(),d=f.x,p=f.y;if(0===i)if(s.firstSpotHit&&s.points.length>2)u(),c(),l(o);else{if("Circle"===e.target.className)return;a(d,p,this.calcParm)}if(1===i){if("Circle"===e.target.className)return;a(d,p,this.calcParm),a(d,p,this.calcParm),a(d,p,this.calcParm),a(d,p,this.calcParm),u()}}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=(t.prompt,t.data,this.props),r=n.layersGroup,i=n.image,a=(n.addSpot,n.moveShape),u=(n.closeLine,n.pointMove),c=(n.outFirstTime,n.fixFirstSpotHit),f=n.addTempLayer,d=n.shape,h=n.fixShapeFill,v=n.selectShape,m=n.alterShapeState,b=n.fixLayerHold,O=n.redoAPoint,S=n.stage,T=n.fistTimeUnclose,D=r.layers,x=r.curtTag,I=r.selectedTag,j=r.holdingLayerID,E=S.width,k=S.height,L={x:0,y:0,width:0,height:0};if(i){var C=i.width,A=i.height,M=(0,p.drawImgCenter)(C,A,E,k),N=M.x,H=M.y,F=M.w,B=M.h,R=M.scale;L={x:N,y:H,width:F,height:B},this.calcParm={x:N,y:H,scale:R}}var W=null,$=null,U=null,G=null;if(D=D.map(function(t,n){t.id===x&&(W=t),j&&t.id===j&&($=t),I&&t.id===I&&(U=t,G=n);var r=t.points,i=t.fill,l=t.closed,p=t.id,y=t.lineColor,m=t.overPointIndex,P=t.shapeType;return o.createElement(g.default,s({key:p},{points:r,fill:i,closed:l,layerID:p,fixFirstSpotHit:c,curtTag:x,lineColor:y,pointMove:u,stageWidth:E,stageHeight:k,calcParm:e.calcParm,overPointIndex:m,shape:d,moveShape:a,addTempLayer:f,fixShapeFill:h,selectedTag:I,selectShape:v,shapeType:P,fixLayerHold:b,redoAPoint:O,getPointerPosition:e.getPointerPosition}))}),U){var V=D.splice(G,1);D=D.concat(V)}return o.createElement("div",{ref:"stageContainer",className:"stageContainer",style:{position:"relative",width:"800px",height:"100%",overflow:"auto"}},o.createElement(P,s({ref:"stage"},{width:E,height:k},{onMouseDown:function(t){var n=t.target.className;if("Line"!==n)return I&&"Image"===n?void v(null):void(0===d?e.mark(t):0===e.clickTime?(e.mark(t),I||e.clickTime++):(f(),b(x),I||(e.clickTime=0)))},onMouseMove:function(t){if(0!==d&&W&&1===e.clickTime){var n=e.calcParm,r=e.getPointerPosition(),o=r.x,i=r.y;o<4||o>E-4||i<4||i>k-4||(u(0,o,i,n),1===d&&(u(1,null,i,n),u(3,o,null,n)))}}}),l(w,{},void 0,o.createElement(_,{width:E,height:k}),o.createElement(_,s({},L,{image:i}))),D),$?o.createElement(y.default,{alterShapeState:m,fixLayerHold:b,holdingLayer:$,holdingLayerID:j,redoAPoint:O,fistTimeUnclose:T,shape:d}):null)}}]),t}(r);t.default=O}).call(t,n(31),n(1).Component,n(1))},134:function(e,t,n){"use strict";function r(e){return{type:o,layerID:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.redoAPoint=r;var o="CANCLE_A_POINT"},135:function(e,t,n){"use strict";function r(e){var t=(e.url,e.photo),n=e.active,r=e.switchPhoto,i=e.selectShape;e.shouldFinish;return o("div",{className:"col-lg-1 col-md-1 col-sm-2 col-xs-3"},void 0,o("div",{className:"thumbnail "+(n?"active":""),onClick:function(e){r(t),i(null,!0)}},void 0,o("img",{src:t.url})))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t.default=r;n(16)},136:function(e,t,n){"use strict";function r(e){var t=e.id,n=e.tagName,r=e.active,i=e.selectShape,u=e.fixLayerHold,c=e.fixShapeFill;return o("div",{className:r?a.default.active:"",onClick:function(e){i(t)},onDoubleClick:function(e){u(t)},onMouseOver:function(e){return c(!0,t)},onMouseOut:function(e){return c(!1,t)}},void 0,n)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}();t.default=r;var i=n(73),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n(16)},137:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(n(7),n(12)),i=r(o),a=n(41),u=r(a),c=n(64),l=r(c),s=n(70),f=r(s),d=n(68),p=r(d),h=n(69),y=r(h);t.default={photosData:l.default,paintingBoard:i.default,curtPhoto:u.default,tagsBoard:p.default,shape:y.default,stage:f.default}},151:function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},152:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(24),u=r(a),c=n(34),l=r(c),s=n(77),f=n(33),d=n(78),p=r(d),h=n(151),y=function(){try{return window.history.state||{}}catch(e){return{}}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(h.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,h.supportsHistory)(),r=!(0,h.supportsPopStateOnHashChange)(),a=e.forceRefresh,c=void 0!==a&&a,d=e.getUserConfirmation,v=void 0===d?h.getConfirmation:d,g=e.keyLength,m=void 0===g?6:g,b=e.basename?(0,f.stripTrailingSlash)((0,f.addLeadingSlash)(e.basename)):"",P=function(e){var t=e||{},n=t.key,r=t.state,o=window.location,i=o.pathname,a=o.search,c=o.hash,l=i+a+c;return(0,u.default)(!b||(0,f.hasBasename)(l,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+l+'" to begin with "'+b+'".'),b&&(l=(0,f.stripBasename)(l,b)),(0,s.createLocation)(l,r,n)},w=function(){return Math.random().toString(36).substr(2,m)},_=(0,p.default)(),O=function(e){i($,e),$.length=t.length,_.notifyListeners($.location,$.action)},S=function(e){(0,h.isExtraneousPopstateEvent)(e)||x(P(e.state))},T=function(){x(P(y()))},D=!1,x=function(e){if(D)D=!1,O();else{_.confirmTransitionTo(e,"POP",v,function(t){t?O({action:"POP",location:e}):I(e)})}},I=function(e){var t=$.location,n=E.indexOf(t.key);-1===n&&(n=0);var r=E.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(D=!0,A(o))},j=P(y()),E=[j.key],k=function(e){return b+(0,f.createPath)(e)},L=function(e,r){(0,u.default)(!("object"===(void 0===e?"undefined":o(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,s.createLocation)(e,r,w(),$.location);_.confirmTransitionTo(i,"PUSH",v,function(e){if(e){var r=k(i),o=i.key,a=i.state;if(n)if(t.pushState({key:o,state:a},null,r),c)window.location.href=r;else{var l=E.indexOf($.location.key),s=E.slice(0,-1===l?0:l+1);s.push(i.key),E=s,O({action:"PUSH",location:i})}else(0,u.default)(void 0===a,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},C=function(e,r){(0,u.default)(!("object"===(void 0===e?"undefined":o(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,s.createLocation)(e,r,w(),$.location);_.confirmTransitionTo(i,"REPLACE",v,function(e){if(e){var r=k(i),o=i.key,a=i.state;if(n)if(t.replaceState({key:o,state:a},null,r),c)window.location.replace(r);else{var l=E.indexOf($.location.key);-1!==l&&(E[l]=i.key),O({action:"REPLACE",location:i})}else(0,u.default)(void 0===a,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},A=function(e){t.go(e)},M=function(){return A(-1)},N=function(){return A(1)},H=0,F=function(e){H+=e,1===H?((0,h.addEventListener)(window,"popstate",S),r&&(0,h.addEventListener)(window,"hashchange",T)):0===H&&((0,h.removeEventListener)(window,"popstate",S),r&&(0,h.removeEventListener)(window,"hashchange",T))},B=!1,R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},W=function(e){var t=_.appendListener(e);return F(1),function(){F(-1),t()}},$={length:t.length,action:"POP",location:j,createHref:k,push:L,replace:C,go:A,goBack:M,goForward:N,block:R,listen:W};return $};t.default=v},16:function(e,t,n){"use strict";function r(e,t){return 0!==e.reduce(function(e,n){return e.id===t?e:n},e[0]).points.length}function o(){window.alert("请先完成标注")}Object.defineProperty(t,"__esModule",{value:!0}),t.finishFirst=r,t.hintFinish=o},265:function(e,t,n){e.exports=n.p+"5d002ef41dded1ae8ff34a6d8ecf1c70.jpg"},266:function(e,t,n){e.exports=n.p+"f5d86e648bbd8d8ac09e5c1f75ae52d1.jpg"},267:function(e,t,n){e.exports=n.p+"d49e6ecd8eb6112e6ab92f1e3454e987.jpg"},268:function(e,t,n){e.exports=n.p+"01d63a8c029e393d05d8d16652dbcfbe.jpg"},269:function(e,t,n){e.exports=n.p+"d1d19c4f889b2e13691fe66b82e938e8.jpg"},41:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.photo;switch(n){case a:return r;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.switchPhoto=void 0,t.default=r;var o=n(12),i=n(16),a="SWITCH_PHOTO";t.switchPhoto=function(e){return function(t,n){var r=n().curtPhoto.id;if(void 0!==r){var u=n().paintingBoard[r];if(u.holdingLayerID||(0,i.finishFirst)(u.layers,u.curtTag))return void(0,i.hintFinish)()}if(t({type:a,photo:e}),n().paintingBoard[e.id]){if(n().paintingBoard[e.id].curtTag)return;t((0,o.addTempLayer)(e.id))}else t((0,o.addTempLayer)(e.id))}}},64:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return{type:l,imgArr:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.type,o=t.imgArr;switch(n){case l:return[].concat(r(e),r(o));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=void 0,t.addPhotos=o,t.default=i;var a=(n(25),n(41)),u=[n(266),n(267),n(268),n(269),n(265)],c=u.map(function(e,t){return{id:t,url:e}}),l="LOAD_IMAGE";t.loadImage=function(){return function(e,t){t().router.location.state;if(e(o(c)),!t().curtPhoto.id){var n=c[0];e((0,a.switchPhoto)(n))}}}},66:function(e,t,n){"use strict";function r(e,t,n,r){var o=e.offsetWidth,i=o/t;r.width(t*i),r.height(n*i),r.scale({x:i,y:i}),r.draw()}function o(e,t,n,r){var o=e/t,i={};return e>=t&&(i.w=n,i.h=i.w/o,i.x=(n-i.w)/2,i.y=(r-i.h)/2,i.scale=e/i.w),e<=t&&(i.h=r,i.w=i.h*o,i.x=(n-i.w)/2,i.y=(r-i.h)/2,i.scale=t/i.h),i}function i(e,t,n){var r=n.x,o=n.y,i=n.scale;return{disW:(e-r)*i,disT:(t-o)*i}}Object.defineProperty(t,"__esModule",{value:!0}),t.fitStageIntoParentContainer=r,t.drawImgCenter=o,t.getRectToImg=i},67:function(e,t,n){"use strict";(function(e,n,r){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var u in i)void 0===n[u]&&(n[u]=i[u]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e,f=s.Image,d=s.Layer,p=s.Line,h=s.Circle,y=(s.Canvas,s.Group,function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.curtCircle=null;var r=n.canvas=document.createElement("canvas");return r.width=e.stageWidth,r.height=e.stageHeight,n}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.points,o=t.fill,i=t.closed,a=t.layerID,l=t.curtTag,s=t.pointMove,y=t.fixFirstSpotHit,v=t.lineColor,g=t.calcParm,m=t.stageWidth,b=t.stageHeight,P=t.overPointIndex,w=t.shape,_=t.moveShape,O=t.fixShapeFill,S=t.selectedTag,T=t.selectShape,D=t.shapeType,x=t.fixLayerHold,I=t.getPointerPosition,j=[];n.forEach(function(e){j.push(e.x,e.y)});var E=null;return E=a===l||a===S?n.map(function(e,t){var n=e.x,o=e.y;return r.createElement(h,c({key:t,ref:"Circle"+t,onMouseOver:function(e){0===w&&0===t?y(!0,t):y(!1,t)},onMouseOut:function(e){y(!1,null)}},{x:n,y:o,radius:P===t?8:6,fill:0!==P||0!==t||i?"#00ff00":null,stroke:"#ff0000",strokeWidth:3,draggable:!0},{onDragMove:function(e){var n=e.target.attrs,r=n.x,o=n.y;if(!(r<4||r>m-4||o<4||o>b-4)&&(s(t,r,o,g),1===D))switch(t){case 0:s(1,null,o,g),s(3,r,null,g);break;case 1:s(0,null,o,g),s(2,r,null,g);break;case 2:s(1,r,null,g),s(3,null,o,g);break;case 3:s(0,r,null,g),s(2,null,o,g)}},dragBoundFunc:function(e){var t=e.x,n=e.y;return t<4&&(t=4),t>m-4&&(t=m-4),n<4&&(n=4),n>b-4&&(n=b-4),{x:t,y:n}}}))}):null,u(d,{},void 0,S?r.createElement(f,c({width:m,height:b},{onMouseMove:function(t){e.offsetDistence&&_(e.offsetDistence,I(),a)}})):null,r.createElement(p,c({points:j,stroke:v,strokeWidth:4,lineJoin:"round",closed:i,fill:o||S===a?"rgba(255,0,0,0.3)":null,listening:S===a},{onMouseDown:function(t){var r=I();e.offsetDistence=n.map(function(e){return{x:r.x-e.x,y:r.y-e.y}})},onMouseUp:function(t){e.offsetDistence=null},onDblClick:function(e){x(a)},onMouseMove:function(t){e.offsetDistence&&_(e.offsetDistence,I(),a)}})),i?r.createElement(p,c({points:[].concat(j,[j[0],j[1]]),stroke:"red",strokeWidth:14,opacity:0},{onMouseOver:function(e){O(!0,a)},onMouseOut:function(e){return O(!1,a)},onClick:function(e){T(a)},onDblClick:function(e){x(a)}})):null,E)}}]),t}(n));t.default=y}).call(t,n(31),n(1).Component,n(1))},68:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){return{type:s,curtPhotoID:e,id:t}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1],n=t.type,i=t.curtPhotoID,a=t.tag,c=t.id,d=e[i];switch(d||(d={}),n){case l:var p=d,h=p.tags;h||(h=[]);return u({},e,r({},i,u({},d,{tags:[a].concat(o(h)),curtTag:a.id})));case s:return u({},e,r({},i,u({},d,{curtTag:c})));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addTag=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.switchTag=i,t.default=a;var c=(n(7),n(12)),l="ADD_TAGSSS",s="SWITCH_TAGSSS",f={};t.addTag=function(){return function(e,t){var n=t().curtPhoto.id,r={id:Math.random(),tagName:"图层:"+Math.random().toString().slice(2,6)};e({type:l,curtPhotoID:n,tag:r}),e((0,c.addTempLayer)(n,r.id))}}},69:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=t.type,r=t.shape;switch(n){case i:return r;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeShape=void 0,t.default=r;var o=n(16),i="CHANGE_SHAPE";t.changeShape=function(e){return function(t,n){var r=n().curtPhoto.id;if(void 0!==r){var a=n().paintingBoard[r];if(a.holdingLayerID||(0,o.finishFirst)(a.layers,a.curtTag))return void(0,o.hintFinish)()}t({type:i,shape:e})}}},70:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1],n=t.type,r=t.width,i=t.height,s=t.preWidth,f=t.preHeight;switch(n){case a:case u:case c:return o({},e,{width:r,height:i,preWidth:s,preHeight:f});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.decrementStage=t.incrementStage=t.adaptStage=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var i=n(12),a="ADAPT_STAGE",u="INCREMENT_STAGE",c="DECREMENT_STAGE",l={width:760,height:500,preWidth:760,preHeight:500};t.adaptStage=function(){return function(e,t){var n=t().stage,r=n.width,o=n.height;e({type:a,width:760,height:500,preWidth:r,preHeight:o}),e((0,i.fixPointPosition)())}},t.incrementStage=function(){return function(e,t){var n=t().stage,r=n.width,o=n.height,a=r,c=o;r*=1.2,o*=1.2,r>2760||o>1500||(e({type:u,width:r,height:o,preWidth:a,preHeight:c}),e((0,i.fixPointPosition)()))}},t.decrementStage=function(){return function(e,t){var n=t().stage,r=n.width,o=n.height,a=r,u=o;r/=1.2,o/=1.2,(r<760||o<500)&&(r=760,o=500),e({type:c,width:r,height:o,preWidth:a,preHeight:u}),e((0,i.fixPointPosition)())}}},72:function(e,t){e.exports={showData:"showData--PNnx9g",closedPrompt:"closedPrompt--3iDUYz",area:"area--6SZkbo"}},73:function(e,t){e.exports={showData:"showData--3-dehD",active:"active--37YGhS"}}},[131]);
//# sourceMappingURL=app_fdfb796c.js.map